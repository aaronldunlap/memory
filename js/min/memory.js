"use strict";function buildCards(){var a=[];return cardFaces.forEach(function(e,d){a.push({face:e,id:d})}),a=_.concat(a,a),a=cheating?_.sortBy(a,"face"):_.shuffle(a)}function checkWinState(){if(matches===toWin){sounds.win.play();$field.children().removeClass("shown done").addClass("hidden"),$field.addClass("win"),setTimeout(function(){return $field.removeClass("win")},2500),setTimeout(function(){return reset()},4500)}}function showCard(a){a.removeClass("hidden").addClass("shown"),sounds.flip.play()}function hideCard(a){$field.addClass("paused"),setTimeout(function(){a.removeClass("shown guess pick").addClass("hidden"),$field.removeClass("paused"),sounds.flip.play(),updateHud("Pick another card")},1100)}function checkClickedCard(a){var e=$field.find(".card"),d=e.filter(".pick"),s=$(a.target).parent(".card");if($field.hasClass("paused"))return void updateHud("Wait a moment");if(!s.hasClass("shown"))if(0===d.length)showCard(s),s.addClass("pick"),updateHud("Now find its match");else{var i=d.data("id"),n=s.data("id");showCard(s),s.addClass("guess"),i!==n?(updateHud("Whoops!"),hideCard(s),hideCard(d)):(matches++,setTimeout(function(){return sounds.success.play()},700),updateHud("Nice job! Pick another card"),checkWinState(),e.removeClass("guess pick"),d.add(s).addClass("done"))}}function placeCards(a){a.forEach(function(a){var e=$('<div class="card hidden" data-id="'+a.id+'">\n                        <div class="back"></div>\n                        <div class="face">'+a.face+"</div>\n                     </div>");e.click(checkClickedCard),$field.append(e)}),sounds.shuffle.play()}function reset(){matches=0;var a=buildCards();$field.empty().removeClass("paused win"),placeCards(a),updateHud("Pick a card")}function updateHud(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";$hud.html("Matches: <b>"+matches+"/"+toWin+"</b> <span>"+a+"</span>")}var $field=$("#playfield"),$hud=$("#hud"),cardFaces=["🍟","😃","😈","🤠","🤖","👽","😴","🤔","😡","🤑","😇","💩"],matches=0,toWin=12,cheating=!1,sounds={success:"audio/success.wav",flip:"audio/flip.wav",shuffle:"audio/shuffle.wav",win:"audio/win.wav"};_.each(sounds,function(a,e){var d=$('<audio src="'+a+'"></audio>');d.insertAfter($field),sounds[e]=d.get(0)}),window.cheat=function(){cheating=!0,reset(),updateHud("Cheat mode: Matches placed together")},reset();