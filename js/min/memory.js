"use strict";function buildCards(){var a=[];return _.sampleSize(cardFaces,toWin).forEach(function(d,e){a.push({face:d,id:e})}),a=_.concat(a,a),a=cheating?_.sortBy(a,"id"):_.shuffle(a)}function checkWinState(){if(matches===toWin){sounds.success.pause(),sounds.flip.pause(),sounds.win.play();$field.children().removeClass("shown done").addClass("hidden"),updateHud("You won!"),$field.addClass("win"),setTimeout(function(){return $field.removeClass("win")},2500),setTimeout(function(){return reset()},4500)}}function showCard(a){a.removeClass("hidden").addClass("shown"),sounds.flip.play()}function hideCard(a){$field.addClass("paused"),setTimeout(function(){a.removeClass("shown guess pick").addClass("hidden"),$field.removeClass("paused"),sounds.flip.play(),updateHud("Pick another card")},1100)}function checkClickedCard(a){var d=$field.find(".card"),e=d.filter(".pick"),s=$(a.target).parent(".card");if($field.hasClass("paused"))return void updateHud("Wait a moment");if(!s.hasClass("shown"))if(0===e.length)showCard(s),s.addClass("pick"),updateHud("Now find its match");else{var i=e.data("id"),n=s.data("id");showCard(s),s.addClass("guess"),i!==n?(updateHud("Whoops!"),hideCard(s),hideCard(e)):(matches++,setTimeout(function(){return sounds.success.play()},700),updateHud("Nice job! Pick another card"),checkWinState(),d.removeClass("guess pick"),e.add(s).addClass("done"))}}function placeCards(a){a.forEach(function(a){var d=$('<div class="card hidden" data-id="'+a.id+'">\n                        <div class="back"></div>\n                        <div class="face">'+a.face+"</div>\n                     </div>");d.click(checkClickedCard),$field.append(d)}),sounds.shuffle.play()}function reset(){matches=0;var a=buildCards();$field.empty().removeClass("paused win"),placeCards(a),updateHud("Pick a card")}function updateHud(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";$hud.html("Matches: <b>"+matches+"/"+toWin+"</b> <span>"+a+"</span>")}var $field=$("#playfield"),$hud=$("#hud"),cardFaces=["ğŸŸ","ğŸ˜ƒ","ğŸ˜ˆ","ğŸ¤ ","ğŸ¤–","ğŸ‘½","ğŸ˜´","ğŸ¤”","ğŸ˜¡","ğŸ¤‘","ğŸ˜‡","ğŸ’©","ğŸ¼","ğŸ³","ğŸŒ","ğŸŒ","ğŸ”","ğŸ•","ğŸš€","ğŸ","ğŸ’–","ğŸ’¯","ğŸ˜","ğŸ‘»","ğŸ’ƒ","ğŸ•","ğŸŒ¹"],matches=0,toWin=12,cheating=!1,sounds={success:"audio/success.wav",flip:"audio/flip.wav",shuffle:"audio/shuffle.wav",win:"audio/win.wav"};_.each(sounds,function(a,d){var e=$('<audio src="'+a+'" preload="auto"></audio>');sounds[d]=e.get(0)}),window.cheat=function(){cheating=!0,reset(),updateHud("Cheat mode: Matches placed together")},$(document).ready(function(){reset()});